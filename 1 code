#include "Utils.h"
#include "MemMap.h"
#include "StdTypes.h"
#include "DIO_interface.h"  
#include "MOTOR_interface.h"
#include "LCD.h"
#include "KeyPad.h"
#include "Stepper.h"
#include "ADC.h"
#include "Sensors.h"
#include "EX_Interrupt.h"
#include "Timers.h"
#include "SERVO.h"
#include "RGB.h"
#include "Converter.h"
#include "ULTRASONIC.h"
#include "UART.h"
#include "UART_Services.h"
#include "PC_Comm_UART.h"
#include "UART_STACK.h" 
#include "SPI.h"
 

int main(void)
{
   sei(); // enable global interrupt

/*******************************Initilization *******************************/
	DIO_Init();
	LCD_Init();
    SPI_Init();
/****************************************************************************/
u8 timer=0;			// Timer 
u8 data='a';		// Data to Master 
u8 Received_data;	// Data From Master 
u8 index=0;			// LCD Index
LCD_GoTo_WriteString(0,0,"Slave");
LCD_GoTo(1,0);
SPI_SendNoBlock(data);
data++;
     while(1)
    {
		// check the Interrupt Flag (complete flag) 
		if (SPI_ReceivePeriodic(&Received_data))
		{
			// if master sent data then Send him this data
			SPI_SendNoBlock(data);
			// display the data from the master
			LCD_GoTo_WriteChar(1,index,Received_data);
			data++;
			index++;
		}
		
		
		// just timer to check the code
		 LCD_GoTo_WriteNumber(1,13,timer);
		 timer++;
		 _delay_ms(400);
    }
}
 
 

 